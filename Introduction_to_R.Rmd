---
title: "Introduction to R"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
  
## Using basic functions in R      

#### Inspecting function documentation   
There are many functions in base R that you can use (in a later tutorial, we will discuss how to create your own functions!). In order to view documentation for a function in R, you can type ?function_name or search for the function name in the help tab. As practice, let's explore the matrix() and mean() functions in R by typing ?matrix and ?mean into the console. Uncomment (by deleting the #s) the code below and run it in the console to inspect the documentation.   
   
Under usage for the matrix()function, you should see the following:  
matrix(data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL)  
The matrix function has 5 distinct parameters. All of them have default values. For example, if you don't put any data into the function, the resulting matrix will be made up of NA values (this is how missing data is generally coded in R). Additionally, the function will have 1 row and 1 column by default and data will be filled by columns because byrow=FALSE by default. The matrix will not have any row or column names because dimnames=NULL by default.   
```{r}
#?matrix
#?mean
```
    
Because all parameters of the matrix() function have defaults, we could call matrix() with no inputs and we would get a 1x1 matrix with NA values and no dimension names. We can also pick and choose whatever parameters we do want to fill in and ignore anything that we want to leave as defaults.       
```{r}
# Call matrix() with no inputs
matrix()

# Make a 2x3 matrix of NAs
matrix(nrow=2, ncol=3)
```
    
In contrast, the mean() function has some required parameters. When you type ?mean into the console, you should see the following:      
mean(x, trim = 0, na.rm = FALSE, ...)    
The parameter x has no default value; you must specify the values that you want to take the mean of. The other paramters are given defaults: trim=0 and na.rm=FALSE. If you read the descriptions for these parameters, you will see that trim allows you to calculate a trimmed mean (i.e., eliminate some proportion of extreme values before calculating the mean) and na.rm allows you to remove missing (NA) values before calculating the mean. By default, R will not do any trimming and NAs will not be removed. This can cause issues (see below):  

```{r}
# Create some data and save it as data1 and data2
data1 <- c(1,2,3,4,7,NA)
data2 <- c(1,2,3,4,7)

# Calculate the mean of data1 and data2
# Note that data1 has a mean of NA because there was an NA value that was not removed
mean(data1)
mean(data2)

# Now explicitly set na.rm=TRUE and recalculate the mean of data1. Now we get the same as data2
mean(data1, na.rm=TRUE)
```
      
#### Calling functions in R  
When using functions in R, you can make it clear which inputs refer to which parameters by either a) using the order of the parameters specified in the usage or b) naming them explicitly.  
```{r}
# Note that these two calls to the mean() function will return the same output
mean(data1, .2, TRUE)
mean(x=data1, trim=.2, na.rm=TRUE)

# However, the following code will give an error because "TRUE" is not a valid input to trim,
# Which is the second parameter listed in the usage
# Mean(data1,TRUE)

# To specify na.rm=TRUE but leave the trim=0 default as is, we simply do the following:
mean(data1, na.rm=TRUE)
# (Note that, since data1 still matches to x, which is the first parameter in usage, 
#  we do not need to specify x=data1)
```
  
## Data types and structures    

This section covers four basic data types in R: characters, numerics, integers, and logicals.
This section covers four basic ways to store data in R: vectors, data frames, matrices, and lists.

You can learn about these data types below    

#### Numerics and integers  

```{r}
# To store data in some variable name, use either = or <-
# To save the number 5 as "number":
number <- 5
number = 5 #does the same thing

# Print number:
print(number)  

# Find out the class of number:
class(number)

# Change number to an integer and re-save it as number2:
number2 <- as.integer(number)

# Inspect the class of number2 to see that it is an integer:
class(number2)
```
    
#### Characters  

```{r}
# Save a character string in a variable named message
message <- "welcome"

# Print message:
print(message)

# Inspect the class of message:
class(message)
```

  
#### Logicals   
Logical data is either TRUE or FALSE  
In R, TRUE=1 and FALSE=0   
```{r}
# Save the logical TRUE as a variable called outcome:  
outcome <- TRUE  

# Print outcome
print(outcome)

# Inspect class of outcome
class(outcome)

# Note that, weirdly, outcome+outcome=2  
outcome+outcome
```
  
In R, you can test a statement to see if it is TRUE or FALSE. Note that R allows you to make comparisons accross variable types: integers may be compared to numerics and logicals may be compared to integers/numerics. For characters, comparatives are assessed using alphabetical order (letters earlier in the alphabet are "smaller"):    
  1) == means "is equal to"  
  2) != means "is not equal to"  
  3) > means "greater than"; >= means "greater than or equal to"  
  4) < means "less than; <= means "less than or equal to"   
  
```{r}
# Is 5 equal to 3?
5==3

# Is 5 not equal to 3?
5!=3

# Is 5 less than 3?
5<3

# Is 5 greater than 3?
5>3

# Is 5 greater than 5?
5>5

# Is 5 greater than or equal to 5?
5>=5

# Is 5 equal to 5?
5==5

# Is "hello" equal to "hello"?
"hello" == "hello"

# Is "hello" equal to "goodbye"?
"hello" == "goodbye"

# Is "hello" greater than "goodbye"? (in other words is "hello" after "goodbye" alphabetically?)
"hello">"goodbye"  

# Is TRUE == 1?
TRUE==1

# Is FALSE==0?
FALSE==0
```
  
#### Vectors  
```{r}
# The easiest way to create a vector is by using the c() function
vec1 <- c(2,3,4,5)
print(vec1)

# Note that, if you include multiple data types in a vector, R will change all values to the same type
vec2 <- c(7,3)
vec2
class(vec2)
vec3 <- c(7,3,"hello")
vec3
class(vec3)

# For values in a row, we can also use a colon:
vec3 <- 2:5
print(vec3)

# We can use the c() function to combine pre-saved vectors:
vec4 <- c(vec1,vec3)
print(vec4)

# Use the length function to find the length of a vector  
length(vec4)
```
   
Here are some other useful shortcuts for creating vectors in R:  
```{r}
# Use the rep() function to repeat values. Inspect the following to see how it works!
rep(x=0,times=5) #create a vector of 5 zeros
rep(x=c(1,2,3),times=5) #create a vector with five repeats of 1,2,3
rep(c(1,2,3),each=2,times=5) #repeat each value in 1,2,3 twice, then repeat that 5 times  

# Use the seq function to create a sequence of values  
seq(from=1, to=5, by=.5) #create a vector with values from 1-5, incementing by .5
seq(from=1, to=5, length.out=17) #create a vector with 17 equally spaced values going from 1 to 5
```
    
#### Matrices  
As shown above, an m by n matrix can be created in R using the matrix() function  
Here are some examples  
```{r}
A <- matrix(2, nrow=3, ncol=3)
print(A)
B <- matrix(c(1,2,5,3,4,0,2,1,5), nrow=3, ncol=3, byrow=TRUE)
print(B)

# Print the dimensions of a matrix (number of rows followed by number of columns)
dim(A)

# Matrix multiplication
A %*% B

# Element-wise multiplication  
A * B

# Element-wise addition
A+B

# Transpose of a matrix
t(A)

# Inverse of a matrix
solve(B)
```
  
#### Data Frames  
Data frames are generally used to store tabular data and are composed of same-length vectors; these vectors can be of differing data types. In general, when you read a .csv data file into R, it will be saved as a data frame.  
We can create a data frame in R as follows:  
```{r}
# Create a fake dataset called example_data
example_data <- data.frame(ID_Num = c(1:10),
                           Age = rep(24:28, each=2),
                           State = c(rep("New Jersey", 5), rep("New York", 5)))

# Change row names of the data frame (some made up names)
rownames(example_data) <- c("Sarah", "Mike", "Drew", "Eric", "Maria", 
                            "Lindsey", "Mark", "Jenny", "Sophie", "Paul")

# Print the data frame
example_data
```
    
The following R code outlines a few ways to inspect data in a data frame.    
```{r}
# Get dimensions (same as matrices)
dim(example_data)

# Get number of columns
ncol(example_data)

# Get number of rows
nrow(example_data)

# Get summaries of the columns
summary(example_data)

# Access a single column of the data frame using $
example_data$Age

# Inspect row names
rownames(example_data)

# Inspect column names
colnames(example_data)
```

  
#### Lists  
Lists enable multiple data types or data sets to be stored in a simple object. For example, a list could have a data frame as its first element, a vector as its second element, and a character string as its third element.  
```{r}
# Save vector vec1, matrix A, and vector vec2 in a list called example list
example_list <- list(vec1, A, vec2)

# Print example_list
example_list
```
    
## Indexing  
In R, indices start at 1, not 0 as in other languages. For example, the index of the 3rd element in a vector is 3. 

#### Using indices to extract elements in a vector  
We can use indices enclosed in square brackets in order to extract data from a vector as follows:  
```{r}
# This R chunk uses vector vec4 from above  
# Re-print vec4
vec4

# Extract the 3rd element in vec4
vec4[3]

# Extract the 3rd through 5th elements in vec4
vec4[3:5]

# Extract the 1st, 3rd, and 7th elements in vec4
vec4[c(1,3,7)]

# Remove the 2nd element from vec4
vec4[-2]

# Remove the 2nd, 4th, and 5th elements from vec4
vec4[-c(2,4,5)]
```
   
We can also use the following functions to either a) get a logical vector indicating which values in the vector meet some criterion or b) get indices of values in a vector that meet some criterion.  
```{r}
# Logical vector of the same length as vec4
# TRUE wherever elements equal 2; FALSE elsewhere
vec4==2

# Get indices of all values in vec4 that are equal to 2
which(vec4==2)

# Get index of the maximum value in vec4 
# If the maximum occurs more than once, this returns the first location by default  
which.max(vec4)

# Return logical vector indicating which elements of vec4 are either equal to 2 or 4 
vec4 %in% c(2,4)  

# Another way to do the same. Note that | means "or" and & means "and"
vec4==2 | vec4==4
```
  
By enclosing the output from the above functions in square brackets, we can extract elements meeting particular criteria from a vector. For example:  
```{r}
# Extract elements of vec4 that are equal to 2 
vec4[vec4==2]

# Extract elements of vec4 that are equal to 2 or 4
vec4[vec4==2|vec4==4]
#or:
vec4[vec4 %in% c(2,4)]
```
   
#### Using indices to extract elements in a matrix
In a similar way, we can use square brackets to extract elements from a matrix. However, we now need both row and column indices to specify a particular element. See examples below:  
```{r}
# Re-print matrix B for reference  
B

# Extract the element of matrix B that is located in row 3, column 2
B[3,2]

# Extract all elements of B that are greater than 2 and less than 5
B[B>2 & B<5]
```
  
We can also use indexing to extract particular rows or columns of a matrix. Note that, in general, we extract elements from a matrix by using [row_index,column_index]. If we just want to specify row indices, but not column indicies, we can leave the column index blank; similarly, if we just want to specify column indices, we can leave the row index blank. For example:  
```{r}
# Extract the 2nd row of matrix B
B[2,]

# Extract the 1st and 3rd rows of matrix B
B[c(1,3),]

# Extract the 2nd column of matrix B
# Note that, because these values are in the same column, they are returned as a vector, not matrix
B[,2]

# Extract the values that are in the 1st and 3rd rows and 2nd and 3rd columns of matrix B
B[c(1,3),2:3]
```
   
#### Extracting elements of a data frame    
Extracting values from a data frame works in much the same way as above; however, it is also possible to specify rows and columns of a data frame by name (or by using a dollar sign for columns). See below:  
```{r}
# Print the 3rd row of example_data
example_data[3,]

# Print the 2nd and 3rd row of example_data
example_data[2:3,]


### THREE DIFFERENT WAYS TO GET THE 2ND COLUMN (Age)
# Using the column index
example_data[,2]

# Using a $
example_data$Age

# Using square brackets and the column name
example_data[,"Age"]
```
    











